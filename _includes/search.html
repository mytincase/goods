<style>
  .results-container .title {color: #d9230f;}
  .results-container .url {color: silver;}
  .results-container a {display: block; color: #777;}
  .results-container a:hover, .results-container a:focus {text-decoration: none;}
  .results-container a:hover .title {text-decoration: underline;}
</style>

<div class="container">
   <div id="search-bar">
     <input type="text" class="form-control text-small launch-modal-search" id="search-input" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
   </div>
   <ul id="results-container"></ul>
</div>




<!-- Script pointing to jekyll-search.js -->
<script src="{{ site.baseurl }}/assets/js/simple-jekyll-search.js" type="text/javascript"></script>

<script type="text/javascript">
SimpleJekyllSearch({
     searchInput: document.getElementById('search-input'),
     resultsContainer: document.getElementById('results-container'),
     json: '{{ site.baseurl }}/search.json',
     searchResultTemplate: SimpleJekyllSearchResult(),
     limit: 400,
     fuzzy: false,
     exclude: ['Welcome']
});


function SimpleJekyllSearchResult(term) {
  $('#results-container').show( 400 );
  $( "body" ).addClass( "modal-open" );
  
  document.getElementById('results-container').innerHTML = '<div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"> <div class="modal-dialog shadow-lg" role="document"> <div class="modal-content"> <div class="modal-header" id="modtit"> <button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"> &times; </button> </div> <div class="modal-body"> <ul class="mb-0"> </ul>    </div> <div class="modal-footer"><button id="btnx" type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button></div></div> </div></div>';
  if(term) {
      document.getElementById('modtit').innerHTML = "<h5 class='modal-title'>Search results for '" + term + "'</h5>" + document.getElementById('modtit').innerHTML;
      //put results on the screen.
      var results = idx.search(term);
      if(results.length>0){
          //console.log(idx.search(term));
          //if results
          for (var i = 0; i < results.length; i++) {
              // more statements
              var ref = results[i]['ref'];
              var url = documents[ref]['url'];
              var title = documents[ref]['title'];
              var body = documents[ref]['body'].substring(0,160)+'...';
              document.querySelectorAll('#results-container ul')[0].innerHTML = document.querySelectorAll('#results-container ul')[0].innerHTML + "<li class='results-container'><a href='" + url + "'><span class='title'>" + title + "</span><br /><small><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></small></a></li>";
          }
      } else {
          document.querySelectorAll('#results-container ul')[0].innerHTML = "<li class='results-container'>Sorry, no results found. Close & try a different search!</li>";
      }
  }
  return false;
}
  
$(function() {
  $("#results-container").on('click', '#btnx', function () {
      $('#results-container').hide( 5 );
      $( "body" ).removeClass( "modal-open" );
  });
});
</script>